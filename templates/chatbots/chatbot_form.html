{% extends "generic/object_form.html" %}
{% load i18n %}
{% load waffle_tags %}
{% load static %}
{% load form_tags %}
{% block breadcrumbs %}
  <div class="text-sm breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li><a href="{% url 'chatbots:chatbots_home' request.team.slug %}">Chatbots</a></li>
      {% if experiment.id %}
        <li><a
          href="{% url 'chatbots:single_chatbot_home' request.team.slug experiment.id %}">{{ experiment.name }}</a>
        </li>
        <li class="pg-breadcrumb-active" aria-current="page">Edit</li>
      {% else %}
        <li class="pg-breadcrumb-active" aria-current="page">Create</li>
      {% endif %}
    </ul>
  </div>
{% endblock %}
{% block form %}
  <div>
    {% render_form_fields form "name" "description" %}
  </div>
{% endblock form %}
{% block form_actions %}
  {% if not experiment or experiment.is_editable %}
    <div class="mt-2">
      <input type="submit" class="pg-button-primary" value="{{ button_text }}">
      {% if experiment.id %}
        <button type="submit" class="pg-button-secondary" name="action" {% if disable_version_button %}disabled="True"{% endif %} value="save_and_version">Save & Create new version</button>
        <button type="submit" class="pg-button-danger" name="action" value="save_and_archive" onclick="return confirm('Are you sure you want to archive this experiment?');">Archive</button>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}
{% block page_js %}
  {{ voice_providers_types|json_script:"voiceProviderTypes" }}
  {{ synthetic_voice_options|json_script:"voiceOptions" }}
  {{ llm_options|json_script:"llmModelOptions" }}
  <script>

    let element = document.getElementById('allowlist-multiselect');
    new TomSelect(element, {
      plugins: ["remove_button", "caret_position", "input_autogrow"],
      maxItems: null,
      create: true,
      plugins: {
        'checkbox_options': {
          'checkedClassNames':   ['ts-checked'],
          'uncheckedClassNames': ['ts-unchecked'],
        }
      },
    });
  </script>
{% endblock page_js %}
